{"version":3,"sources":["webpack:///./src/views/Login.vue?907f","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?5da6","webpack:///./src/views/Login.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","xs12","sm12","md8","offset-md2","lg6","offset-lg3","wrap","staticClass","_v","ref","lazy-validation","nativeOn","submit","$event","preventDefault","model","value","callback","$$v","valid","expression","rules","accountRules","label","error-messages","errors","required","maxlength","account","type","passwordRules","password","disabled","color","snackColor","right","top","multi-line","timeout","snackbar","_s","snackText","dark","flat","on","click","staticRenderFns","Loginvue_type_script_lang_js_","data","timer","v","length","items","signBy","alert","captcha","cooldown","methods","_this","$refs","form","validate","unique","onLoginSucceed","id","username","is_admin","session","exist","then","row","clear","reset","_this2","login","setTimeout","$router","push","views_Loginvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/login.293a96a9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('v-layout',[_c('v-flex',{attrs:{\"xs12\":\"\",\"sm12\":\"\",\"md8\":\"\",\"offset-md2\":\"\",\"lg6\":\"\",\"offset-lg3\":\"\",\"wrap\":\"\"}},[_c('v-card',{staticClass:\"px-5 py-3 mt-5\"},[_c('h3',{staticClass:\"headline mb-0\"},[_vm._v(\"登录\")]),_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"},nativeOn:{\"submit\":function($event){$event.preventDefault();return _vm.submit($event)}},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"rules\":_vm.accountRules,\"label\":\"账户\",\"error-messages\":_vm.errors,\"required\":\"\",\"maxlength\":\"18\"},model:{value:(_vm.account),callback:function ($$v) {_vm.account=$$v},expression:\"account\"}}),_c('v-text-field',{attrs:{\"type\":\"password\",\"rules\":_vm.passwordRules,\"label\":\"密码\",\"required\":\"\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('v-card-actions',[_c('v-btn',{attrs:{\"disabled\":!_vm.valid,\"type\":\"submit\"}},[_vm._v(\"\\n              登录\\n            \")])],1)],1)],1)],1),_c('v-snackbar',{attrs:{\"color\":_vm.snackColor,\"right\":\"\",\"top\":\"\",\"multi-line\":\"\",\"timeout\":5000},model:{value:(_vm.snackbar),callback:function ($$v) {_vm.snackbar=$$v},expression:\"snackbar\"}},[_vm._v(\"\\n      \"+_vm._s(_vm.snackText)+\"\\n      \"),_c('v-btn',{attrs:{\"dark\":\"\",\"flat\":\"\"},on:{\"click\":function($event){_vm.snackbar = false}}},[_vm._v(\"\\n        Close\\n      \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container>\n\n    <v-layout>\n      <!-- login -->\n      <v-flex xs12 sm12 md8 offset-md2 lg6 offset-lg3 wrap>\n        <v-card class=\"px-5 py-3 mt-5\">\n          <!-- title -->\n          <h3 class=\"headline mb-0\">登录</h3>\n          <!-- form -->\n          <v-form ref=\"form\" v-model=\"valid\" @submit.native.prevent=\"submit\" lazy-validation>\n            <!-- input control -->\n            <v-text-field v-model=\"account\" :rules=\"accountRules\" label=\"账户\" :error-messages=\"errors\" required maxlength=\"18\"></v-text-field>\n\n            <v-text-field v-model=\"password\" type=\"password\" :rules=\"passwordRules\" label=\"密码\" required></v-text-field>\n            <!-- action button -->\n            <v-card-actions>\n              <v-btn :disabled=\"!valid\" type=\"submit\">\n                登录\n              </v-btn>\n            </v-card-actions>\n          </v-form>\n        </v-card>\n      </v-flex>\n\n      <v-snackbar v-model=\"snackbar\" :color=\"snackColor\" right top multi-line :timeout=\"5000\">\n        {{ snackText }}\n        <v-btn dark flat @click=\"snackbar = false\">\n          Close\n        </v-btn>\n      </v-snackbar>\n\n    </v-layout>\n\n  </v-container>\n</template>\n\n\n<script>\n// import api from \"./../api\";\nimport session from \"./../utils/session.js\";\nexport default {\n  data: () => ({\n    valid: true,\n    timer: 0,\n    account: \"\",\n    accountRules: [v => !!v || \"账户为必填项\"],\n    password: \"\",\n    passwordRules: [\n      v => !!v || \"密码为必填项\",\n      v => (v && v.length >= 6) || \"密码长度至少为六个字符\"\n    ],\n    items: [\"手机\", \"邮箱\"],\n    signBy: \"手机\",\n    errors: [],\n    alert: false,\n    // 验证码对象\n    captcha: {\n      timer: null,\n      cooldown: 0\n    },\n    snackbar: false,\n    snackColor: \"error\",\n    snackText: \"登录失败，请检查用户名或密码\"\n  }),\n\n  methods: {\n    submit() {\n      if (this.$refs.form.validate()) {\n        // // Native form submission is not yet supported\n\n        let unique, password;\n\n        if (!(unique = this.account) || !(password = this.password)) {\n          return;\n        }\n\n        if (unique === \"admin\" && password === \"123123\") {\n          this.onLoginSucceed({ id: 1, username: \"admin\", is_admin: true });\n          return;\n        }\n\n        session.exist(this.account, this.password).then(row => {\n          if (!row) {\n            this.snackbar = true;\n            this.snackText = \"登录失败，请检查用户名或密码\";\n            return;\n          }\n          this.onLoginSucceed(row);\n        });\n      }\n    },\n    clear() {\n      this.$refs.form.reset();\n    },\n    onLoginSucceed(row) {\n      delete row.password;\n      session.login(row);\n      this.snackbar = true;\n      (this.snackColor = \"success\"), (this.snackText = \"登录成功！\");\n      setTimeout(() => {\n        if (session.is_admin()) {\n          this.$router.push(\"/admin/order\");\n          return;\n        }\n        this.$router.push(\"/\");\n      }, 1000);\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=3e3d4e67&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Login.vue\"\nexport default component.exports"],"sourceRoot":""}